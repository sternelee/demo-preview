(function(s){typeof define=="function"&&define.amd?define(s):s()})(function(){"use strict";var s=(o,n,e)=>new Promise((a,i)=>{var h=r=>{try{c(e.next(r))}catch(p){i(p)}},l=r=>{try{c(e.throw(r))}catch(p){i(p)}},c=r=>r.done?a(r.value):Promise.resolve(r.value).then(h,l);c((e=e.apply(o,n)).next())});const u=document.currentScript,t={src:"https://changs-fashion.myshopify.com/cdn/shop/files/whatsapp.webp?width=200",site:"",phone:"",width:"60",height:"60",alt:"Click to Whatsapp",elm:"",style:"",welcome:"Hello, I am very interested in this product and would like to contact you further.",end:"Thank you \u{1F91D}."};if(u){for(const{name:o,value:n}of Array.from(u.attributes))o.startsWith("data-")&&(t[o.slice(5)]=n);console.log(t)}const y="https://spoo.me/",m="wati-capi-glcid",f="watisdk",d=(o,n)=>new URL(o).search?`${o}&${n}`:`${o}?${n}`,g=o=>s(void 0,null,function*(){try{const n=yield fetch(y,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:new URLSearchParams({url:o})});if(n.ok){const e=yield n.json();console.log(e);const a=new URL(e.short_url).pathname.slice(1);return d(location.origin+location.pathname,`gid=${a}&from=${f}`)}else return console.error(`HTTP error! Status: ${n.status}`),o}catch(n){return console.error(`Fetch error: ${n}`),o}});document.addEventListener("DOMContentLoaded",function(){if(!t.phone)return;const o=new URLSearchParams(location.search),n="wati-capi-img";o.has("gclid")&&localStorage.setItem(m,o.toString());const e=document.createElement("img");if(e.setAttribute("id",n),e.setAttribute("src",t.src),e.setAttribute("width",t.width),e.setAttribute("height",t.height),e.setAttribute("alt",t.alt),e.setAttribute("loading","lazy"),e.style.cursor="pointer",t.style){var a=document.createElement("style");a.innerHTML=`#${n} { ${t.style} }`,document.getElementsByTagName("head")[0].appendChild(a)}else e.style.position="fixed",e.style.zIndex="999",e.style.bottom="10px",e.style.right="10px";e.addEventListener("click",()=>s(this,null,function*(){let i=location.href;if(!location.search.includes("gclid")){const c=localStorage.getItem(m);c&&(i=d(i,c))}i=yield g(i),t.site&&(i=d(t.site,i.split("?")[1]||"")),console.log(i);const h=encodeURIComponent(`${t.welcome} ${i}
${t.end}`),l=`https://api.whatsapp.com/send/?phone=${encodeURIComponent(t.phone)}&text=${h}&type=phone_number&app_absent=0&${o.toString()}`;console.log("target:",l),window.open(l,"_blank")})),t.elm?document.querySelector(t.elm).appendChild(e):document.body.appendChild(e)})});
